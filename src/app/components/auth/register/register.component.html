<div
  class="min-vh-100 d-flex align-items-center justify-content-center text-white"
  style="
    background: linear-gradient(-45deg, #000428, #004e92, #000428, #004e92);
    background-size: 400% 400%;
    animation: gradientBG 15s ease infinite;
  "
>
  <form
    [formGroup]="registerForm"
    (ngSubmit)="onSubmit()"
    class="bg-dark bg-opacity-75 p-4 rounded-4 shadow w-100"
    style="max-width: 400px; backdrop-filter: blur(10px)"
  >
    <h2 class="text-center mb-4 text-white">Register</h2>

    <!-- First Name -->
    <div class="mb-3">
      <label class="form-label">First Name</label>
      <input
        type="text"
        class="form-control bg-secondary text-white border-0"
        formControlName="firstName"
      />
      <div
        *ngIf="
          registerForm.get('firstName')?.invalid &&
          (registerForm.get('firstName')?.dirty ||
            registerForm.get('firstName')?.touched)
        "
        class="mt-1"
      >
        <ng-container *ngIf="registerForm.get('firstName')?.errors as errors">
          <div
            *ngIf="errors['required']"
            class="text-danger d-flex align-items-center gap-1 animate__animated animate__fadeIn"
            style="font-size: 0.875rem"
          >
            <i class="bi bi-exclamation-circle-fill"></i>
            First name is required.
          </div>

          <div
            *ngIf="!errors['required'] && errors['minlength']"
            class="text-danger d-flex align-items-center gap-1 animate__animated animate__fadeIn"
            style="font-size: 0.875rem"
          >
            <i class="bi bi-exclamation-circle-fill"></i>
            Minimum 2 characters required.
          </div>

          <div
            *ngIf="
              !errors['required'] && !errors['minlength'] && errors['pattern']
            "
            class="text-danger d-flex align-items-center gap-1 animate__animated animate__fadeIn"
            style="font-size: 0.875rem"
          >
            <i class="bi bi-exclamation-circle-fill"></i>
            Only letters allowed (spaces in between are okay).
          </div>
        </ng-container>
      </div>
    </div>

    <!-- Last Name -->
    <div class="mb-3">
      <label class="form-label">Last Name </label>
      <input
        type="text"
        class="form-control bg-secondary text-white border-0"
        formControlName="lastName"
      />
      <div
        *ngIf="
          registerForm.get('lastName')?.invalid &&
          (registerForm.get('lastName')?.dirty ||
            registerForm.get('lastName')?.touched)
        "
        class="mt-1"
      >
        <ng-container *ngIf="registerForm.get('lastName')?.errors as errors">
          <div
            *ngIf="errors['required']"
            class="text-danger d-flex align-items-center gap-1 animate__animated animate__fadeIn"
            style="font-size: 0.875rem"
          >
            <i class="bi bi-exclamation-circle-fill"></i>
            Last name is required.
          </div>

          <div
            *ngIf="!errors['required'] && errors['minlength']"
            class="text-danger d-flex align-items-center gap-1 animate__animated animate__fadeIn"
            style="font-size: 0.875rem"
          >
            <i class="bi bi-exclamation-circle-fill"></i>
            Minimum 2 characters required.
          </div>

          <div
            *ngIf="
              !errors['required'] && !errors['minlength'] && errors['pattern']
            "
            class="text-danger d-flex align-items-center gap-1 animate__animated animate__fadeIn"
            style="font-size: 0.875rem"
          >
            <i class="bi bi-exclamation-circle-fill"></i>
            Only letters allowed (spaces in between are okay).
          </div>
        </ng-container>
      </div>
    </div>

    <!-- Email -->
    <div class="mb-3">
      <label class="form-label">Email</label>
      <input
        type="email"
        class="form-control bg-secondary text-white border-0"
        formControlName="email"
      />
      <div
        *ngIf="
          registerForm.get('email')?.invalid &&
          (registerForm.get('email')?.dirty ||
            registerForm.get('email')?.touched)
        "
        class="mt-1"
      >
        <ng-container *ngIf="registerForm.get('email')?.errors as errors">
          <div
            *ngIf="errors['required']"
            class="text-danger d-flex align-items-center gap-1 animate__animated animate__fadeIn"
            style="font-size: 0.875rem"
          >
            <i class="bi bi-exclamation-circle-fill"></i>
            Email is required.
          </div>

          <div
            *ngIf="!errors['required'] && errors['pattern']"
            class="text-danger d-flex align-items-center gap-1 animate__animated animate__fadeIn"
            style="font-size: 0.875rem"
          >
            <i class="bi bi-exclamation-circle-fill"></i>
            Email must be in a valid format like: example&#64;domain.com
          </div>
        </ng-container>
      </div>
    </div>

    <!-- Password -->
    <div class="mb-3">
      <label class="form-label">Password</label>
      <input
        type="password"
        class="form-control bg-secondary text-white border-0"
        formControlName="password"
      />
      <div
        *ngIf="
          registerForm.get('password')?.invalid &&
          (registerForm.get('password')?.dirty ||
            registerForm.get('password')?.touched)
        "
        class="mt-1"
      >
        <ng-container *ngIf="registerForm.get('password')?.errors as errors">
          <div
            *ngIf="errors['required']"
            class="text-danger d-flex align-items-center gap-1 animate__animated animate__fadeIn"
            style="font-size: 0.875rem"
          >
            <i class="bi bi-exclamation-circle-fill"></i>
            Password is required.
          </div>

          <div
            *ngIf="!errors['required'] && errors['pattern']"
            class="text-danger d-flex align-items-center gap-1 animate__animated animate__fadeIn"
            style="font-size: 0.875rem"
          >
            <i class="bi bi-exclamation-circle-fill"></i>
            Password must be at least 8 characters and include: uppercase,
            lowercase, number, special character
          </div>
        </ng-container>
      </div>
    </div>

    <!-- Error Message -->
    <div *ngIf="errorMessage" class="text-danger mb-3 small">
      {{ errorMessage }}
    </div>

    <!-- Submit -->
    <button
      type="submit"
      class="btn w-100 d-flex align-items-center justify-content-center gap-2"
      [class.btn-primary]="!loading"
      [class.btn-secondary]="loading"
      [disabled]="loading"
    >
      <div
        *ngIf="loading"
        class="spinner-border spinner-border-sm me-2"
        role="status"
      ></div>
      {{ loading ? "Registering..." : "Register" }}
    </button>

    <!-- Redirect -->
    <p class="mt-3 text-center small">
      Already have an account?
      <a routerLink="/auth/login" class="text-info text-decoration-underline"
        >Login</a
      >
    </p>
  </form>
</div>

<style>
  @keyframes gradientBG {
    0% {
      background-position: 0% 50%;
    }
    50% {
      background-position: 100% 50%;
    }
    100% {
      background-position: 0% 50%;
    }
  }
</style>
